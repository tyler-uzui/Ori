<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ori BastiGHG Secret</title>
<style>
  body {
    background-color: #111;
    color: #0f0;
    font-family: monospace;
    text-align: center;
    padding: 50px;
  }

  pre {
    background-color: #000;
    color: #0f0;
    padding: 20px;
    border-radius: 10px;
    display: inline-block;
    margin-bottom: 20px;
  }

  input[type="text"] {
    background-color: #222;
    color: #0f0;
    border: 1px solid #0f0;
    padding: 5px 10px;
    border-radius: 5px;
    font-family: monospace;
    margin: 5px 0;
  }

  input[type="submit"], button {
    background-color: #0f0;
    color: #111;
    padding: 5px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 10px;
  }

  input[type="submit"]:hover, button:hover {
    background-color: #0c0;
  }

  #feedback {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 20px 30px;
    border-radius: 10px;
    display: none;
    font-weight: bold;
    text-align: center;
    white-space: pre-line;
    font-size: 18px;
    z-index: 9999;
  }

  .correct {
    background-color: #0c0;
    color: #111;
  }

  .incorrect {
    background-color: #c00;
    color: #fff;
  }

  #adminSection {
    display: none;
    margin-top: 10px;
  }

  #adminAttemptsDisplay {
    margin-bottom: 5px;
    color: #0f0;
  }

  #adminLockDisplay {
    color: #0f0;
    margin-top: 5px;
  }

  #attemptsDisplay {
    margin-bottom: 15px;
  }
</style>
</head>
<body>

<h1>Ori-Projekt Login</h1>

<pre id="binary">
01001011 01100101 
01101110 01100111 
00001010 01001111 
01110010 01101001
</pre>

<p id="attemptsDisplay">Attempts left: 5</p>

<form id="codeForm">
  <label for="benutzer">BenutzerID:</label><br>
  <input type="text" id="benutzer" placeholder="Benutzer-Id"><br>

  <label for="code">Code:</label><br>
  <input type="text" id="code" placeholder="Code"><br>

  <input type="submit" value="Absenden">
</form>

<div id="adminSection">
  <p id="adminAttemptsDisplay">Admin attempts left: 3</p>
  <input type="text" id="adminInput" placeholder="Admin-Code eingeben">
  <button id="adminSubmit">Submit</button>
  <p id="adminLockDisplay"></p>
</div>

<div id="feedback">
Incorrect code
!!warning!!
</div>

<script>
const correctUser = "Keng";
const correctCode = "Ori";
const adminCode = "Tyler";

let attempts = 0;
let maxAttempts = 5;
let lock = false;
let adminAttempts = 3;

const form = document.getElementById("codeForm");
const feedback = document.getElementById("feedback");
const binary = document.getElementById("binary");
const attemptsDisplay = document.getElementById("attemptsDisplay");
const adminSection = document.getElementById("adminSection");
const adminInput = document.getElementById("adminInput");
const adminSubmit = document.getElementById("adminSubmit");
const adminAttemptsDisplay = document.getElementById("adminAttemptsDisplay");
const adminLockDisplay = document.getElementById("adminLockDisplay");

function updateAttempts() {
  attemptsDisplay.textContent = "Versuche übrig: " + Math.max(0, maxAttempts - attempts);
}

function updateAdminAttempts() {
  adminAttemptsDisplay.textContent = "Admin attempts left: " + Math.max(0, adminAttempts);
}

form.addEventListener("submit", function(e){
  e.preventDefault();
  if(lock) return;

  const benutzer = document.getElementById("benutzer").value;
  const code = document.getElementById("code").value;

  if(benutzer === correctUser && code === correctCode){
    feedback.textContent = "Access granted ✅";
    feedback.className = "correct";
    feedback.style.display = "block";
    setTimeout(() => window.location.href = "info.html", 700);
  } else {
    attempts++;
    updateAttempts();
    feedback.textContent = "Incorrect code\n!!warning!!";
    feedback.className = "incorrect";
    feedback.style.display = "block";
    setTimeout(() => { if(!lock) feedback.style.display = "none"; }, 700);

    if(attempts >= maxAttempts){
      lock = true;
      form.style.display = "none";
      attemptsDisplay.style.display = "none";
      feedback.style.display = "none";
      adminSection.style.display = "block";
      adminLockDisplay.textContent = "Too many attempts. You are locked for 10 minutes.\nAdmin code to unlock:";
      adminAttempts = 3;
      updateAdminAttempts();

      setTimeout(() => {
        lock = false;
        attempts = 0;
        updateAttempts();
        form.style.display = "block";
        attemptsDisplay.style.display = "block";
        adminSection.style.display = "none";
        adminLockDisplay.textContent = "";
        adminAttempts = 3;
        updateAdminAttempts();
      }, 600000); // 10 Minuten
    }
  }
});

adminSubmit.addEventListener("click", function(){
  const entered = adminInput.value;
  if(entered === adminCode){
    lock = false;
    attempts = 0;
    form.style.display = "block";
    attemptsDisplay.style.display = "block";
    feedback.style.display = "none";
    adminSection.style.display = "none";
    adminLockDisplay.textContent = "";
    adminAttempts = 3;
    updateAdminAttempts();
    alert("Admin-Code accepted! You can try again.");
  } else {
    adminAttempts = Math.max(0, adminAttempts - 1);
    updateAdminAttempts();
    adminLockDisplay.textContent = "Incorrect Admin-Code!";
    if(adminAttempts <= 0){
      alert("Admin-Code limit reached. Closing page.");
      window.close();
    }
  }
});
</script>

</body>
</html>